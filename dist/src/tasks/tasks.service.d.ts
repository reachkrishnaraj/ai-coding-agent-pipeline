import { PrismaService } from '../prisma/prisma.service';
import { CreateTaskDto } from './dto/create-task.dto';
import { ClarifyTaskDto } from './dto/clarify-task.dto';
import { TaskQueryDto } from './dto/task-query.dto';
export declare class TasksService {
    private readonly prisma;
    private readonly slackNotificationService?;
    private readonly llmService;
    private readonly githubService;
    constructor(prisma: PrismaService, llmService: any, githubService: any, slackNotificationService?: any | undefined);
    private readonly validTransitions;
    private validateTransition;
    private logEvent;
    create(dto: CreateTaskDto): Promise<{
        issue_url: string;
        issue_number: number;
        agent: any;
        task_type: any;
        description: string;
        repo: string;
        acceptanceCriteria: string | null;
        priority: string;
        source: string;
        createdBy: string | null;
        status: import("@prisma/client").$Enums.TaskStatus;
        id: string;
        createdAt: Date;
        taskTypeHint: string | null;
        filesHint: string | null;
        llmAnalysis: import("@prisma/client/runtime/client").JsonValue | null;
        llmSummary: string | null;
        taskType: string | null;
        recommendedAgent: string | null;
        likelyFiles: import("@prisma/client/runtime/client").JsonValue | null;
        suggestedCriteria: import("@prisma/client/runtime/client").JsonValue | null;
        clarificationQuestions: import("@prisma/client/runtime/client").JsonValue | null;
        clarificationAnswers: import("@prisma/client/runtime/client").JsonValue | null;
        isClarified: boolean;
        githubIssueNumber: number | null;
        githubIssueUrl: string | null;
        githubPrNumber: number | null;
        githubPrUrl: string | null;
        githubPrStatus: string | null;
        githubBranch: string | null;
        slackUserId: string | null;
        slackChannelId: string | null;
        slackThreadTs: string | null;
        updatedAt: Date;
        dispatchedAt: Date | null;
        completedAt: Date | null;
        errorMessage: string | null;
    } | {
        questions: string[] | undefined;
        description: string;
        repo: string;
        acceptanceCriteria: string | null;
        priority: string;
        source: string;
        createdBy: string | null;
        status: import("@prisma/client").$Enums.TaskStatus;
        id: string;
        createdAt: Date;
        taskTypeHint: string | null;
        filesHint: string | null;
        llmAnalysis: import("@prisma/client/runtime/client").JsonValue | null;
        llmSummary: string | null;
        taskType: string | null;
        recommendedAgent: string | null;
        likelyFiles: import("@prisma/client/runtime/client").JsonValue | null;
        suggestedCriteria: import("@prisma/client/runtime/client").JsonValue | null;
        clarificationQuestions: import("@prisma/client/runtime/client").JsonValue | null;
        clarificationAnswers: import("@prisma/client/runtime/client").JsonValue | null;
        isClarified: boolean;
        githubIssueNumber: number | null;
        githubIssueUrl: string | null;
        githubPrNumber: number | null;
        githubPrUrl: string | null;
        githubPrStatus: string | null;
        githubBranch: string | null;
        slackUserId: string | null;
        slackChannelId: string | null;
        slackThreadTs: string | null;
        updatedAt: Date;
        dispatchedAt: Date | null;
        completedAt: Date | null;
        errorMessage: string | null;
    }>;
    clarify(id: string, dto: ClarifyTaskDto): Promise<{
        issue_url: string;
        issue_number: number;
        agent: any;
        task_type: any;
        description: string;
        repo: string;
        acceptanceCriteria: string | null;
        priority: string;
        source: string;
        createdBy: string | null;
        status: import("@prisma/client").$Enums.TaskStatus;
        id: string;
        createdAt: Date;
        taskTypeHint: string | null;
        filesHint: string | null;
        llmAnalysis: import("@prisma/client/runtime/client").JsonValue | null;
        llmSummary: string | null;
        taskType: string | null;
        recommendedAgent: string | null;
        likelyFiles: import("@prisma/client/runtime/client").JsonValue | null;
        suggestedCriteria: import("@prisma/client/runtime/client").JsonValue | null;
        clarificationQuestions: import("@prisma/client/runtime/client").JsonValue | null;
        clarificationAnswers: import("@prisma/client/runtime/client").JsonValue | null;
        isClarified: boolean;
        githubIssueNumber: number | null;
        githubIssueUrl: string | null;
        githubPrNumber: number | null;
        githubPrUrl: string | null;
        githubPrStatus: string | null;
        githubBranch: string | null;
        slackUserId: string | null;
        slackChannelId: string | null;
        slackThreadTs: string | null;
        updatedAt: Date;
        dispatchedAt: Date | null;
        completedAt: Date | null;
        errorMessage: string | null;
    }>;
    private dispatchTask;
    findAll(query: TaskQueryDto): Promise<{
        tasks: {
            description: string;
            repo: string;
            acceptanceCriteria: string | null;
            priority: string;
            source: string;
            createdBy: string | null;
            status: import("@prisma/client").$Enums.TaskStatus;
            id: string;
            createdAt: Date;
            taskTypeHint: string | null;
            filesHint: string | null;
            llmAnalysis: import("@prisma/client/runtime/client").JsonValue | null;
            llmSummary: string | null;
            taskType: string | null;
            recommendedAgent: string | null;
            likelyFiles: import("@prisma/client/runtime/client").JsonValue | null;
            suggestedCriteria: import("@prisma/client/runtime/client").JsonValue | null;
            clarificationQuestions: import("@prisma/client/runtime/client").JsonValue | null;
            clarificationAnswers: import("@prisma/client/runtime/client").JsonValue | null;
            isClarified: boolean;
            githubIssueNumber: number | null;
            githubIssueUrl: string | null;
            githubPrNumber: number | null;
            githubPrUrl: string | null;
            githubPrStatus: string | null;
            githubBranch: string | null;
            slackUserId: string | null;
            slackChannelId: string | null;
            slackThreadTs: string | null;
            updatedAt: Date;
            dispatchedAt: Date | null;
            completedAt: Date | null;
            errorMessage: string | null;
        }[];
        total: number;
        page: number;
        limit: number;
    }>;
    findOne(id: string): Promise<{
        events: {
            id: string;
            eventType: string;
            payload: import("@prisma/client/runtime/client").JsonValue | null;
            createdAt: Date;
            taskId: string;
        }[];
    } & {
        description: string;
        repo: string;
        acceptanceCriteria: string | null;
        priority: string;
        source: string;
        createdBy: string | null;
        status: import("@prisma/client").$Enums.TaskStatus;
        id: string;
        createdAt: Date;
        taskTypeHint: string | null;
        filesHint: string | null;
        llmAnalysis: import("@prisma/client/runtime/client").JsonValue | null;
        llmSummary: string | null;
        taskType: string | null;
        recommendedAgent: string | null;
        likelyFiles: import("@prisma/client/runtime/client").JsonValue | null;
        suggestedCriteria: import("@prisma/client/runtime/client").JsonValue | null;
        clarificationQuestions: import("@prisma/client/runtime/client").JsonValue | null;
        clarificationAnswers: import("@prisma/client/runtime/client").JsonValue | null;
        isClarified: boolean;
        githubIssueNumber: number | null;
        githubIssueUrl: string | null;
        githubPrNumber: number | null;
        githubPrUrl: string | null;
        githubPrStatus: string | null;
        githubBranch: string | null;
        slackUserId: string | null;
        slackChannelId: string | null;
        slackThreadTs: string | null;
        updatedAt: Date;
        dispatchedAt: Date | null;
        completedAt: Date | null;
        errorMessage: string | null;
    }>;
    retry(id: string): Promise<{
        issue_url: string;
        issue_number: number;
        agent: any;
        task_type: any;
        description: string;
        repo: string;
        acceptanceCriteria: string | null;
        priority: string;
        source: string;
        createdBy: string | null;
        status: import("@prisma/client").$Enums.TaskStatus;
        id: string;
        createdAt: Date;
        taskTypeHint: string | null;
        filesHint: string | null;
        llmAnalysis: import("@prisma/client/runtime/client").JsonValue | null;
        llmSummary: string | null;
        taskType: string | null;
        recommendedAgent: string | null;
        likelyFiles: import("@prisma/client/runtime/client").JsonValue | null;
        suggestedCriteria: import("@prisma/client/runtime/client").JsonValue | null;
        clarificationQuestions: import("@prisma/client/runtime/client").JsonValue | null;
        clarificationAnswers: import("@prisma/client/runtime/client").JsonValue | null;
        isClarified: boolean;
        githubIssueNumber: number | null;
        githubIssueUrl: string | null;
        githubPrNumber: number | null;
        githubPrUrl: string | null;
        githubPrStatus: string | null;
        githubBranch: string | null;
        slackUserId: string | null;
        slackChannelId: string | null;
        slackThreadTs: string | null;
        updatedAt: Date;
        dispatchedAt: Date | null;
        completedAt: Date | null;
        errorMessage: string | null;
    } | {
        questions: string[] | undefined;
        description: string;
        repo: string;
        acceptanceCriteria: string | null;
        priority: string;
        source: string;
        createdBy: string | null;
        status: import("@prisma/client").$Enums.TaskStatus;
        id: string;
        createdAt: Date;
        taskTypeHint: string | null;
        filesHint: string | null;
        llmAnalysis: import("@prisma/client/runtime/client").JsonValue | null;
        llmSummary: string | null;
        taskType: string | null;
        recommendedAgent: string | null;
        likelyFiles: import("@prisma/client/runtime/client").JsonValue | null;
        suggestedCriteria: import("@prisma/client/runtime/client").JsonValue | null;
        clarificationQuestions: import("@prisma/client/runtime/client").JsonValue | null;
        clarificationAnswers: import("@prisma/client/runtime/client").JsonValue | null;
        isClarified: boolean;
        githubIssueNumber: number | null;
        githubIssueUrl: string | null;
        githubPrNumber: number | null;
        githubPrUrl: string | null;
        githubPrStatus: string | null;
        githubBranch: string | null;
        slackUserId: string | null;
        slackChannelId: string | null;
        slackThreadTs: string | null;
        updatedAt: Date;
        dispatchedAt: Date | null;
        completedAt: Date | null;
        errorMessage: string | null;
    }>;
    cancel(id: string): Promise<{
        message: string;
    }>;
    getHealth(): Promise<{
        status: string;
        db: string;
        error?: undefined;
    } | {
        status: string;
        db: string;
        error: any;
    }>;
}
